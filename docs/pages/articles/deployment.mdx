import { Callout, Steps } from 'nextra/components'

# Deployment

Refer to the [Video Tutorials](/video) section items for more information about deployment and other development-related video tutorials.

<Callout type="info" emoji="ℹ️">
These videos created for ACAP's initial release (ACAP 1.0) back in **2023** should still be compatible with the latest ACAP 2.0, with minor changes and updates.

Follow the steps in the **Render Initial Blueprint Instance** section to sync its Render deployment methods with the ACAP 2.0 updates.
</Callout>

## Git Flow

CI/CD using GitHub Actions deploy code updates to the **development** or **production** environments following this [simplified version of Git Flow](https://youtu.be/cV-9KszXEyw?feature=shared&t=845). Refer to the [Git Flow](/post-installation/git-flow) page for more information about this process.

<br />

<img src="https://raw.githubusercontent.com/acaptutorials/acaptutorials.github.io/assets/images/git_flow_steps.png" alt="acap-git-flow" style={{ margin: "auto" }} />

## Render Initial Blueprint Instance

These steps complement the video tutorials for creating a Blueprint Instance, making them compatible with latest ACAP version (ACAP 2.0).

<Callout type="default" emoji="💡">
**acap-v2** has updated source codes at Release tag <b>{process.env.RELEASE_VERSION}</b> dev branch @commit <b>{process.env.COMMIT_ID}</b>.
</Callout>

<Steps>

### Create a Blueprint Instance

Follow the video guides for creating a Blueprint Instance for the `development` or `production` environment.

- **10 Deployment to Development Environment**
- **11 Deployment to Production Environment**

### Create Render Secrets

ACAP 2.0 now requires Docker secrets (secret files) in its build stage to build its API documentation, using default values if "secret" files are undefined during the build stage.

<Callout type="info" emoji="ℹ️">
Render does not support adding Secrets (Docker secret files) on initial Blueprint creation. Create these Render **Secrets** with appropriate values after launching a Render **Web Service** connected to the **Blueprint Instance** to provide correct values during the succeeding Render build stages.
</Callout>

1. Go to **Dashboard** → newly-created **Web Service** (associated with the Blueprint) → **Environment**.
2. Go to the **Secret Files** section under the **Environment** page.
3. Add the following **"Render Secrets"**. Refer to the `acap-v2/README` file's **Render Secrets** section to know more about these variables and their values.

   ```env copy
   LIVE_ORIGIN
   REGION_NAME
   ROOT_API_URL
   IS_RMCAS_API_ACTIVE
   ```

### Update Render Variables

Set the Render Environment variables if the [ACAP-RCMAS APIs](/post-installation/acap-rcmas-api) are active.

Refer to the `acap-v2/server/README` and root `acap-v2/README` files' **environment variables** sections to know more about these variables and their values.

```env copy
IS_RMCAS_API_ACTIVE=0
ARCHIVE_TENDAY_FORECAST=0
```

### Re-deploy

Re-deploy the server (from GitHub Actions) or manually from the Render dashboard to build the correct values for the online API documentation using the Render Secret values.

</Steps>
